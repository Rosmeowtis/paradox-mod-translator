# 工作流程

1. 工作流程可分为预处理、翻译、后处理三大块，其中
  1. 预处理：包含对原始文件内容的清洗与整理，将不符合规范的文件修改为符合 YAML 规范的，例如
    1. 修正错误的缩进；
    2. 修复缺失的引号；
    3. 将非YAML标准的引号后数字0去除；（参考了 https://github.com/DragonKnightOfBreeze/Paradox-Language-Support/blob/master/docs/zh/ref-syntax.md 中的描述，该数字为内部追踪号，对于玩家和mod开发者是无用的）
    4. 如果文件过大，还需要将文件拆分为适合大模型上下文大小的切片。
  2. 翻译：
    1. 加载大模型；
    2. 加载术语表；
    3. 对切片进行翻译；
    4. 检查每个切片，核对本地化文本中的特殊格式是否被破坏，这一步骤不由大模型参与，而是依赖 Rust 代码编写的检查规则。
  3. 后处理：
    1. 将翻译后的切片按来源文件进行组合；
    2. 将翻译后的文本保存在对应的目录下。